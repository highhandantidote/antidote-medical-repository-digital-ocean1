document.addEventListener("DOMContentLoaded",function(){var e;console.log("Appointments.js loaded"),e=document.querySelectorAll(".appointment-action-form"),console.log(`Found ${e.length} appointment action forms`),e.forEach(o=>{o.addEventListener("submit",function(e){e.preventDefault();e=o.getAttribute("action");let t=e.split("action=")[1].split("&")[0];var e=e.split("id=")[1];console.log(`Processing appointment action: ${t} for appointment `+e),"cancel"===t&&!confirm("Are you sure you want to cancel this appointment?")||(e=o.querySelector('input[name="csrf_token"]').value,fetch(o.action,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRFToken":e,"X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({csrf_token:e})}).then(e=>{if(e.ok)return e.json();throw new Error("Network response was not ok")}).then(e=>{e.success?(alert(e.message||`Appointment ${t} successfully`),window.location.reload()):alert(e.message||`Failed to ${t} appointment`)}).catch(e=>{console.error("Error:",e),alert(`There was a problem with the ${t} action. Please try again.`)}))})})});