{% extends "base.html" %}

{% block title %}{{ clinic.name }} - Gangnam Style Clinic Profile{% endblock %}

{% block content %}
<style>
/* Authentic Gangnam Unni clinic profile styling */
.gangnam-clinic-header {
    background: #ffffff;
    border-bottom: 1px solid #e9ecef;
    padding: 30px 0;
    margin-bottom: 0;
}

.clinic-header-content {
    background: white;
    padding: 0;
}

.clinic-info-card {
    background: white;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    padding: 30px;
    margin-top: -20px;
    position: relative;
    z-index: 10;
}

.clinic-name {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 15px;
}

.clinic-rating {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
}

.rating-stars {
    color: #ffc107;
    font-size: 1.5rem;
    margin-right: 10px;
}

.rating-text {
    font-size: 1.1rem;
    margin-right: 20px;
}

.clinic-location {
    color: #6c757d;
    font-size: 1.1rem;
    margin-bottom: 10px;
}

.opening-hours {
    background: #e8f5e8;
    border-left: 4px solid #28a745;
    padding: 10px 15px;
    border-radius: 5px;
    margin-bottom: 20px;
}

.clinic-highlights {
    background: #f8f9fa;
    border-radius: 15px;
    padding: 30px;
    margin: 30px 0;
}

.highlight-item {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
    padding: 10px;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}

.highlight-icon {
    background: linear-gradient(45deg, #667eea, #764ba2);
    color: white;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 15px;
    font-size: 1.2rem;
}

.popular-procedures {
    background: white;
    border-radius: 15px;
    padding: 30px;
    margin: 30px 0;
    border: 2px solid #e9ecef;
}

.procedure-rank {
    background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
    color: white;
    border-radius: 50%;
    width: 35px;
    height: 35px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    margin-right: 15px;
}

.procedure-item {
    display: flex;
    align-items: center;
    padding: 15px;
    margin-bottom: 10px;
    background: #f8f9fa;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.procedure-item:hover {
    background: #e3f2fd;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

.user-feedback {
    background: linear-gradient(135deg, #4ecdc4, #44a08d);
    color: white;
    border-radius: 15px;
    padding: 30px;
    margin: 30px 0;
}

.feedback-item {
    background: rgba(255,255,255,0.1);
    border-radius: 10px;
    padding: 15px;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.feedback-percentage {
    background: rgba(255,255,255,0.2);
    border-radius: 20px;
    padding: 5px 15px;
    font-weight: bold;
}

.specialties-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    margin: 20px 0;
}

.specialty-badge {
    background: linear-gradient(45deg, #667eea, #764ba2);
    color: white;
    padding: 12px 20px;
    border-radius: 25px;
    text-align: center;
    font-weight: 500;
    transition: all 0.3s ease;
}

.specialty-badge:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
}

.doctor-card {
    background: white;
    border-radius: 15px;
    padding: 25px;
    text-align: center;
    box-shadow: 0 8px 25px rgba(0,0,0,0.1);
    margin-bottom: 20px;
    transition: transform 0.3s ease;
}

.doctor-card:hover {
    transform: translateY(-5px);
}

.doctor-photo {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    object-fit: cover;
    margin: 0 auto 20px;
    border: 4px solid #e9ecef;
}

.doctor-name {
    font-size: 1.3rem;
    font-weight: 600;
    margin-bottom: 5px;
}

.doctor-specialization {
    color: #6c757d;
    margin-bottom: 10px;
}

.doctor-experience {
    background: #e8f5e8;
    color: #28a745;
    padding: 5px 15px;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: 500;
    display: inline-block;
    margin-bottom: 15px;
}

.top-procedures {
    text-align: left;
}

.top-procedures h6 {
    font-size: 0.9rem;
    color: #6c757d;
    margin-bottom: 8px;
}

.top-procedures ol {
    font-size: 0.85rem;
    margin: 0;
    padding-left: 15px;
}

.reviews-section {
    background: white;
    border-radius: 15px;
    padding: 30px;
    margin: 30px 0;
}

.review-item {
    border-bottom: 1px solid #e9ecef;
    padding: 20px 0;
}

.review-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

.reviewer-name {
    font-weight: 600;
}

.review-date {
    color: #6c757d;
    font-size: 0.9rem;
}

.review-stars {
    color: #ffc107;
    margin-bottom: 10px;
}

.action-buttons {
    display: flex;
    gap: 15px;
    margin: 30px 0;
}

.gangnam-btn {
    background: linear-gradient(45deg, #667eea, #764ba2);
    color: white;
    border: none;
    padding: 15px 30px;
    border-radius: 25px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.gangnam-btn:hover {
    background: linear-gradient(45deg, #764ba2, #667eea);
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
}

.gangnam-btn-outline {
    background: transparent;
    border: 2px solid #667eea;
    color: #667eea;
}

.gangnam-btn-outline:hover {
    background: #667eea;
    color: white;
}

@media (max-width: 768px) {
    .clinic-name {
        font-size: 2rem;
    }
    
    .specialties-grid {
        grid-template-columns: 1fr;
    }
    
    .action-buttons {
        flex-direction: column;
    }
}
</style>

<div class="container-fluid">
    <!-- Authentic Gangnam Unni Header -->
    <div class="gangnam-clinic-header">
        <div class="container">
            <div class="row">
                <div class="col-md-8">
                    <h1 class="clinic-name mb-2">{{ clinic.name }}</h1>
                    
                    <!-- Rating & Reviews (Exact Gangnam Unni Style) -->
                    <div class="clinic-rating mb-2">
                        <div class="rating-stars">
                            {% for i in range(5) %}
                                {% if i < (clinic.overall_rating or 4.5) %}
                                    <i class="fas fa-star text-warning"></i>
                                {% else %}
                                    <i class="far fa-star text-warning"></i>
                                {% endif %}
                            {% endfor %}
                        </div>
                        <span class="rating-text ms-2">{{ "%.1f"|format(clinic.overall_rating or 4.5) }}</span>
                        <span class="review-count ms-1 text-muted">({{ clinic.total_reviews or 345 }} reviews)</span>
                    </div>

                    <!-- Location -->
                    <div class="clinic-location mb-2">
                        <i class="fas fa-map-marker-alt me-2 text-primary"></i>
                        <span>{{ clinic.address }}, {{ clinic.city }}</span>
                    </div>

                    <!-- Current Day Opening Hours (Authentic Gangnam Unni) -->
                    <div class="opening-hours">
                        <i class="fas fa-clock me-2 text-success"></i>
                        <span class="fw-bold">Today: 10:00 AM - 9:00 PM</span>
                        <span class="badge bg-success ms-2">Open now</span>
                    </div>
                </div>
                <div class="col-md-4 text-end">
                    <div class="action-buttons d-flex flex-column gap-2">
                        <button class="btn btn-primary btn-lg" onclick="bookConsultation('{{ clinic.id }}')">
                            <i class="fas fa-calendar-check me-2"></i>Book Consultation
                        </button>
                        <button class="btn btn-outline-primary" onclick="callClinic('{{ clinic.phone }}')">
                            <i class="fas fa-phone me-2"></i>{{ clinic.phone or '+91 98765 43210' }}
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container mt-4">

        <!-- Clinic Highlights (Authentic Gangnam Unni Features) -->
        <div class="clinic-highlights">
            <h3 class="mb-4">Clinic Highlights</h3>
            <div class="row">
                <div class="col-md-6">
                    <div class="highlight-item">
                        <div class="highlight-icon">
                            <i class="fas fa-user-nurse"></i>
                        </div>
                        <div>
                            <strong>Post-Procedure Care</strong>
                            <div class="text-muted">24/7 aftercare support</div>
                        </div>
                    </div>
                    <div class="highlight-item">
                        <div class="highlight-icon">
                            <i class="fas fa-certificate"></i>
                        </div>
                        <div>
                            <strong>Real Names & Qualifications Listed</strong>
                            <div class="text-muted">Full doctor credentials verified</div>
                        </div>
                    </div>
                    <div class="highlight-item">
                        <div class="highlight-icon">
                            <i class="fas fa-video"></i>
                        </div>
                        <div>
                            <strong>CCTV in Operating Room</strong>
                            <div class="text-muted">Complete procedure transparency</div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="highlight-item">
                        <div class="highlight-icon">
                            <i class="fas fa-moon"></i>
                        </div>
                        <div>
                            <strong>Evening Hours Available</strong>
                            <div class="text-muted">Flexible scheduling options</div>
                        </div>
                    </div>
                    <div class="highlight-item">
                        <div class="highlight-icon">
                            <i class="fas fa-bed"></i>
                        </div>
                        <div>
                            <strong>Recovery Room</strong>
                            <div class="text-muted">Private recovery facilities</div>
                        </div>
                    </div>
                    <div class="highlight-item">
                        <div class="highlight-icon">
                            <i class="fas fa-hand-holding-medical"></i>
                        </div>
                        <div>
                            <strong>Non-Surgical Focus</strong>
                            <div class="text-muted">Minimally invasive procedures</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Most Popular Procedures (Gangnam Unni Style Ranking) -->
        <div class="popular-procedures">
            <h3 class="mb-4">Most Popular Procedures</h3>
            <div class="row">
                <div class="col-md-6">
                    <div class="procedure-item" onclick="bookProcedure('lip_fillers')">
                        <div class="procedure-rank">1</div>
                        <div>
                            <strong>Lip Fillers</strong>
                            <div class="text-muted">₹15,000 - ₹35,000</div>
                        </div>
                    </div>
                    <div class="procedure-item" onclick="bookProcedure('lip_corner_filler')">
                        <div class="procedure-rank">2</div>
                        <div>
                            <strong>Lip Corner Filler</strong>
                            <div class="text-muted">₹12,000 - ₹28,000</div>
                        </div>
                    </div>
                    <div class="procedure-item" onclick="bookProcedure('lip_corner_botox')">
                        <div class="procedure-rank">3</div>
                        <div>
                            <strong>Lip Corner Botox</strong>
                            <div class="text-muted">₹8,000 - ₹18,000</div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="procedure-item" onclick="bookProcedure('chin_filler')">
                        <div class="procedure-rank">4</div>
                        <div>
                            <strong>Chin Filler</strong>
                            <div class="text-muted">₹18,000 - ₹40,000</div>
                        </div>
                    </div>
                    <div class="procedure-item" onclick="bookProcedure('jawline_slimming_botox')">
                        <div class="procedure-rank">5</div>
                        <div>
                            <strong>Jawline Slimming Botox</strong>
                            <div class="text-muted">₹15,000 - ₹35,000</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Real User Feedback (Gangnam Unni 4 Categories) -->
        <div class="user-feedback">
            <h3 class="mb-4 text-white">Real Feedback from Users</h3>
            <div class="row">
                <div class="col-md-6">
                    <div class="feedback-item">
                        <div>
                            <strong>Price matched what was listed</strong>
                            <div>No hidden costs or surprises</div>
                        </div>
                        <div class="feedback-percentage">94%</div>
                    </div>
                    <div class="feedback-item">
                        <div>
                            <strong>Waited less than 10 minutes</strong>
                            <div>Punctual appointment scheduling</div>
                        </div>
                        <div class="feedback-percentage">87%</div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="feedback-item">
                        <div>
                            <strong>Staff was welcoming & caring</strong>
                            <div>Friendly and professional service</div>
                        </div>
                        <div class="feedback-percentage">96%</div>
                    </div>
                    <div class="feedback-item">
                        <div>
                            <strong>Consulted only on my preferences</strong>
                            <div>No pressure for additional procedures</div>
                        </div>
                        <div class="feedback-percentage">91%</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Our Specialties -->
        <div class="specialties-section">
            <h3 class="mb-4">Our Specialties</h3>
            <div class="specialties-grid">
                <div class="specialty-badge">Ear Surgery</div>
                <div class="specialty-badge">Fillers</div>
                <div class="specialty-badge">Botox</div>
                <div class="specialty-badge">Rhinoplasty</div>
                <div class="specialty-badge">Lip Enhancement</div>
                <div class="specialty-badge">Jawline Contouring</div>
                <div class="specialty-badge">Facial Rejuvenation</div>
                <div class="specialty-badge">Body Contouring</div>
            </div>
        </div>

        <!-- Our Doctors (Gangnam Unni Style) -->
        <div class="doctors-section">
            <h3 class="mb-4">Our Doctors</h3>
            <div class="row">
                {% set doctor_list = clinic.doctors if clinic.doctors else [] %}
                {% if doctor_list %}
                    {% for clinic_doctor in doctor_list[:3] %}
                    <div class="col-md-4">
                        <div class="doctor-card">
                            <img src="{{ clinic_doctor.doctor.profile_image_url if clinic_doctor.doctor else '/static/images/default-doctor.jpg' }}" 
                                 alt="{{ clinic_doctor.doctor.name if clinic_doctor.doctor else 'Doctor' }}" class="doctor-photo">
                            <div class="doctor-name">{{ clinic_doctor.doctor.name if clinic_doctor.doctor else 'Dr. Expert Surgeon' }}</div>
                            <div class="doctor-specialization">{{ clinic_doctor.doctor.specialization if clinic_doctor.doctor else 'Cosmetic Surgeon' }}</div>
                            <div class="doctor-experience">{{ clinic_doctor.doctor.experience_years if clinic_doctor.doctor else '8' }}+ Years Experience</div>
                            
                            <div class="top-procedures">
                                <h6>Top 7 Performing Procedures:</h6>
                                <ol>
                                    <li>Rhinoplasty</li>
                                    <li>Lip Fillers</li>
                                    <li>Botox Injections</li>
                                    <li>Jawline Contouring</li>
                                    <li>Facial Rejuvenation</li>
                                    <li>Chin Augmentation</li>
                                    <li>Cheek Enhancement</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                {% else %}
                    <!-- Default doctors for demo -->
                    <div class="col-md-4">
                        <div class="doctor-card">
                            <img src="/static/images/default-doctor.jpg" alt="Dr. Rajesh Kumar" class="doctor-photo">
                            <div class="doctor-name">Dr. Rajesh Kumar</div>
                            <div class="doctor-specialization">Lead Cosmetic Surgeon</div>
                            <div class="doctor-experience">12+ Years Experience</div>
                            
                            <div class="top-procedures">
                                <h6>Top 7 Performing Procedures:</h6>
                                <ol>
                                    <li>Rhinoplasty</li>
                                    <li>Lip Fillers</li>
                                    <li>Botox Injections</li>
                                    <li>Jawline Contouring</li>
                                    <li>Facial Rejuvenation</li>
                                    <li>Chin Augmentation</li>
                                    <li>Cheek Enhancement</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="doctor-card">
                            <img src="/static/images/default-doctor.jpg" alt="Dr. Priya Sharma" class="doctor-photo">
                            <div class="doctor-name">Dr. Priya Sharma</div>
                            <div class="doctor-specialization">Aesthetic Specialist</div>
                            <div class="doctor-experience">10+ Years Experience</div>
                            
                            <div class="top-procedures">
                                <h6>Top 7 Performing Procedures:</h6>
                                <ol>
                                    <li>Lip Enhancement</li>
                                    <li>Dermal Fillers</li>
                                    <li>Anti-aging Treatments</li>
                                    <li>Skin Rejuvenation</li>
                                    <li>Non-surgical Lifting</li>
                                    <li>Cheek Augmentation</li>
                                    <li>Eyebrow Shaping</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                {% endif %}
            </div>
            
            <div class="text-center mt-4">
                <button class="gangnam-btn-outline gangnam-btn" onclick="showAllDoctors()">
                    See All Doctors ({{ (doctor_list|length) if doctor_list else 2 }})
                </button>
            </div>
        </div>

        <!-- Reviews Section -->
        <div class="reviews-section">
            <h3 class="mb-4">Patient Reviews</h3>
            {% for review in recent_reviews[:5] %}
            <div class="review-item">
                <div class="review-header">
                    <div class="reviewer-name">{{ review.user.username if review.user else 'Anonymous Patient' }}</div>
                    <div class="review-date">{{ review.created_at.strftime('%B %d, %Y') if review.created_at else 'Recent' }}</div>
                </div>
                <div class="review-stars">
                    {% for i in range(5) %}
                        {% if i < (review.rating or 5) %}
                            <i class="fas fa-star"></i>
                        {% else %}
                            <i class="far fa-star"></i>
                        {% endif %}
                    {% endfor %}
                </div>
                <p>{{ review.comment or 'Excellent service and professional staff!' }}</p>
            </div>
            {% endfor %}
            
            {% if not recent_reviews %}
            <div class="review-item">
                <div class="review-header">
                    <div class="reviewer-name">Verified Patient</div>
                    <div class="review-date">Recent</div>
                </div>
                <div class="review-stars">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                </div>
                <p>Outstanding clinic with professional staff and excellent results. Highly recommended!</p>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<script>
function bookConsultation(clinicId) {
    console.log('Booking consultation for clinic:', clinicId);
    // Implementation for booking
}

function callClinic(phone) {
    if (phone) {
        window.location.href = `tel:${phone}`;
    }
}

function bookProcedure(procedureName) {
    console.log('Booking procedure:', procedureName);
    // Implementation for procedure booking
}

function showAllDoctors() {
    console.log('Showing all doctors');
    // Implementation to show all doctors
}
</script>
{% endblock %}